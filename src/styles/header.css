/* =========================================
   HEADER
   ========================================= */
.main-header {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  z-index: 1000;
  padding: var(--spacing-lg) 0;
  transition: all 0.5s ease;
  background: rgba(250, 249, 246, 0.01); /* Very subtle base */
  backdrop-filter: blur(2px); /* Initial subtle blur */
}

.main-header.scrolled {
  background-color: rgba(250, 249, 246, 0.85); /* More opacity on scroll */
  backdrop-filter: blur(12px); /* Strong glass effect */
  padding: 1rem 0;
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
  border-bottom: 1px solid rgba(255, 255, 255, 0.3);
}

/* Header Links Color Logic */
.header-logo {
  font-family: var(--font-serif);
  font-size: 1.5rem;
  font-weight: 700;
  letter-spacing: 0.05em;
  color: var(--color-white);
  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
  display: flex;
  flex-direction: column;
  line-height: 1;
}

@media (max-width: 639px) {
    .header-logo {
        align-items: flex-start;
        font-size: 1.25rem;
    }
    .header-logo span {
        display: block;
    }
    /* Add a pseudo-element or adjust HTML if we can't change HTML structure easily. 
       Since we reverted to text, we can style it. 
       Actually, to stack "DOMAINE DE" and "LAPISTOULE", we might need a width constraint or <br> 
       Let's use a width constraint on mobile to force wrap if possible, or just standard wrapping.
    */
    .header-logo {
        max-width: 150px;
        text-align: left;
    }
}

.nav-link {
  font-size: 0.875rem;
  font-weight: 500;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  color: var(--color-white);
  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
}

.nav-link:hover {
  color: var(--color-primary);
}

.nav-link.active {
  color: var(--color-primary);
  text-shadow: none;
  font-weight: 700;
}

/* CTA Button - Primary Action (Solid Gold for visibility) */
.header-cta {
  background-color: var(--color-primary);
  border-color: var(--color-primary);
  color: var(--color-white);
  font-weight: 600; /* Make it slightly bolder */
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15); /* subtle shadow to lift it */
  transition: all 0.3s ease; /* Smooth transition for hover effects */
}

.header-cta:hover {
  background-color: var(--color-secondary);
  border-color: var(--color-secondary);
  color: var(--color-white);
  transform: translateY(-2px); /* Micro-animation: lift up slightly */
  box-shadow: 0 6px 16px rgba(0, 0, 0, 0.2); /* Enhanced shadow on hover */
}

/* Scrolled State Colors */
.main-header.scrolled .header-logo,
.main-header.scrolled .nav-link,
.main-header.scrolled .menu-icon {
  color: var(--color-anthracite);
  text-shadow: none;
}
.main-header.scrolled .nav-link.active {
  color: var(--color-primary);
}

/* Keep CTA consistent (Solid Gold) even when scrolled, 
   but we don't need to override anything if we removed the specific scrolled rules for it.
   However, if we want to ensure it stands out against the light header: */
.main-header.scrolled .header-cta {
  /* Optional: You could invert it here if requested, but keeping it consistent is better UX */
  box-shadow: none; /* Remove shadow on flat header if desired, or keep it. */
}

/* Dark Header (for non-home pages) */
.main-header.header-dark {
  background-color: var(--color-anthracite);
  padding: 1rem 0;
}

.main-header.header-dark .header-logo,
.main-header.header-dark .nav-link,
.main-header.header-dark .menu-icon {
  color: var(--color-stone-white);
  text-shadow: none;
}
.main-header.header-dark .nav-link.active {
  color: var(--color-primary);
}

/* Mobile Menu */
.mobile-menu-btn {
  background: none;
  border: none;
  cursor: pointer;
  color: inherit;
}

.main-header.mobile-menu-open .menu-icon {
  color: var(--color-anthracite);
}

.mobile-menu-overlay {
  position: fixed;
  inset: 0;
  background-color: rgba(250, 249, 246, 0.98);
  /* Optional: Add a subtle texture if available, or just a nice border */
  border: 1rem solid rgba(198, 166, 100, 0.1); /* Gold border effect */
  z-index: 900;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 2rem;
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.3s ease;
  backdrop-filter: blur(5px);
}

.mobile-menu-overlay.open {
  opacity: 1;
  pointer-events: auto;
}

.mobile-menu-close {
  position: absolute;
  top: 2rem;
  right: 2rem;
  background: none;
  border: none;
  cursor: pointer;
  z-index: 10;
  padding: 0.5rem;
  transition: transform 0.3s ease;
}

.mobile-menu-close:hover {
  transform: rotate(90deg);
}

.mobile-nav-link {
  font-family: var(--font-serif);
  font-size: 2rem;
  color: var(--color-anthracite);
  position: relative; /* For staggered animation if we add it via JS */
}

.mobile-nav-link:hover {
  color: var(--color-matte-gold);
}

/* =========================================
   RESPONSIVE HEADER
   ========================================= */

/* Mobile (< 640px) */
@media (max-width: 639px) {
  .main-header {
    padding: var(--space-sm) 0;
  }

  .main-header.scrolled {
    padding: var(--space-xs) 0;
  }

  /* .header-logo logic moved up */

  .nav-link {
    font-size: clamp(0.75rem, 2vw, 0.875rem);
    /* Touch target minimum for mobile */
    padding: var(--space-xs) var(--space-sm);
    min-height: var(--touch-target-min);
    display: inline-flex;
    align-items: center;
  }

  .header-cta {
    padding: var(--space-xs) var(--space-md);
    font-size: clamp(0.75rem, 2vw, 0.875rem);
    min-height: var(--touch-target-min);
  }

  .mobile-nav-link {
    font-size: clamp(1.5rem, 6vw, 2rem);
    /* Touch target confortable sur mobile */
    padding: var(--space-md);
    min-height: var(--touch-target-comfortable);
    display: inline-flex;
    align-items: center;
  }
}

/* Tablet (640px - 1023px) */
@media (min-width: 640px) and (max-width: 1023px) {
  .main-header {
    padding: var(--space-md) 0;
  }

  .main-header.scrolled {
    padding: var(--space-sm) 0;
  }

  .header-logo {
    font-size: 1.375rem;
  }
}

/* Desktop (1024px+) */
@media (min-width: 1024px) {
  .main-header {
    padding: var(--space-lg) 0;
  }

  .main-header.scrolled {
    padding: var(--space-md) 0;
  }
}

/* Focus states for accessibility */
.nav-link:focus-visible,
.header-cta:focus-visible,
.mobile-menu-btn:focus-visible {
  outline: 2px solid var(--color-primary);
  outline-offset: 2px;
  border-radius: var(--radius-sm);
}
